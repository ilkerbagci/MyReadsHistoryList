{"ast":null,"code":"import _toConsumableArray from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/src/SearchPage.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport * as BooksAPI from './BooksAPI';\nimport Book from './Book';\nimport SearhBar from './SearchBar';\nvar currentlyReadingBooks = [];\nvar wantToReadBooks = [];\nvar readBooks = [];\nvar uncategorizedBooks = [];\n\nvar SearchPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchPage, _Component);\n\n  function SearchPage(props) {\n    var _this;\n\n    _classCallCheck(this, SearchPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchPage).call(this, props));\n\n    _this.searchBooks = function (query) {\n      BooksAPI.search(query).then(function (result) {\n        if (typeof result === 'undefined') {\n          _this.setState({\n            filteredBooks: _this.props.shelfBooks\n          });\n        } else {\n          _this.setState({\n            filteredBooks: result\n          });\n        }\n      });\n    };\n\n    _this.getBooksWithShelves = function () {\n      var shelfBooks = _this.props.shelfBooks;\n      var filteredBooks = _this.state.filteredBooks;\n      var books = [];\n      var isInShelf = false;\n\n      if (filteredBooks.length > 0) {\n        var currentFilteredBooks = _toConsumableArray(filteredBooks);\n\n        currentFilteredBooks.forEach(function (searchedBook) {\n          isInShelf = false;\n          shelfBooks.forEach(function (shelfBook) {\n            if (shelfBook.id === searchedBook.id) {\n              isInShelf = true;\n              books.push(shelfBook);\n              return;\n            }\n          });\n\n          if (!isInShelf) {\n            searchedBook.shelf = 'none';\n            books.push(searchedBook);\n          }\n        });\n      }\n\n      return books;\n    };\n\n    _this.state = {\n      filteredBooks: []\n    };\n    return _this;\n  }\n\n  _createClass(SearchPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      currentlyReadingBooks = [];\n      wantToReadBooks = [];\n      readBooks = [];\n      uncategorizedBooks = [];\n      this.getBooksWithShelves().forEach(function (book) {\n        if (book.shelf === 'currentlyReading') {\n          currentlyReadingBooks.push(book);\n        } else if (book.shelf === 'wantToRead') {\n          wantToReadBooks.push(book);\n        } else if (book.shelf === 'read') {\n          readBooks.push(book);\n        } else if (book.shelf === 'none') {\n          uncategorizedBooks.push(book);\n        }\n      });\n      var uncategorizedBookItems = uncategorizedBooks.map(function (book) {\n        return React.createElement(Book, {\n          key: book.id,\n          book: book,\n          onShelfSelectionChanged: _this2.props.onShelfSelectionChanged,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        });\n      });\n      return React.createElement(\"div\", {\n        className: \"search-books\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search-books-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"close-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Close\"), \" \"), React.createElement(\"div\", {\n        className: \"search-books-input-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Search by title or author\",\n        onChange: function onChange(event) {\n          return _this2.searchBooks(event.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search-books-results\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"ol\", {\n        className: \"books-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, uncategorizedBookItems)));\n    }\n  }]);\n\n  return SearchPage;\n}(Component);\n\nexport default SearchPage;","map":{"version":3,"sources":["/Users/ibagci/Documents/React/Projects/ReactND-MyReads/src/SearchPage.js"],"names":["React","Component","Link","BooksAPI","Book","SearhBar","currentlyReadingBooks","wantToReadBooks","readBooks","uncategorizedBooks","SearchPage","props","searchBooks","query","search","then","result","setState","filteredBooks","shelfBooks","getBooksWithShelves","state","books","isInShelf","length","currentFilteredBooks","forEach","searchedBook","shelfBook","id","push","shelf","book","uncategorizedBookItems","map","onShelfSelectionChanged","event","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport * as BooksAPI from './BooksAPI'\nimport Book from './Book'\nimport SearhBar from './SearchBar'\n\nlet currentlyReadingBooks = []\nlet wantToReadBooks = []\nlet readBooks = []\nlet uncategorizedBooks = []\n\nclass SearchPage extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            filteredBooks: []\n        }\n    }\n\n\n    searchBooks = (query) => {\n        BooksAPI\n            .search(query)\n            .then((result) => {\n                if (typeof result === 'undefined') {\n                    this.setState({\n                        filteredBooks: this.props.shelfBooks,\n                    })\n                } else {\n                    this.setState({\n                        filteredBooks: result,\n                    })\n                }\n            })\n    }\n\n    getBooksWithShelves = () => {\n        const { shelfBooks } = this.props\n        const { filteredBooks } = this.state\n\n        let books = []\n        let isInShelf = false\n\n        if (filteredBooks.length > 0) {\n            const currentFilteredBooks = [...filteredBooks]\n\n            currentFilteredBooks.forEach((searchedBook) => {\n                isInShelf = false\n                shelfBooks.forEach(shelfBook => {\n                    if (shelfBook.id === searchedBook.id) {\n                        isInShelf = true\n                        books.push(shelfBook)\n                        return\n                    }\n                })\n                if (!isInShelf) {\n                    searchedBook.shelf = 'none'\n                    books.push(searchedBook)\n                }\n            })\n        }\n        return books\n    }\n\n    render() {\n        currentlyReadingBooks = []\n        wantToReadBooks = []\n        readBooks = []\n        uncategorizedBooks = []\n\n        this.getBooksWithShelves().forEach(book => {\n            if (book.shelf === 'currentlyReading') { currentlyReadingBooks.push(book) } \n            else if (book.shelf === 'wantToRead') { wantToReadBooks.push(book) } \n            else if (book.shelf === 'read') { readBooks.push(book) } \n            else if (book.shelf === 'none') { uncategorizedBooks.push(book) }\n        })\n\n        let uncategorizedBookItems = uncategorizedBooks.map((book) => {\n            return (\n                <Book\n                    key={book.id}\n                    book={book}\n                    onShelfSelectionChanged={this.props.onShelfSelectionChanged}\n                />\n            )\n        })\n\n        return (\n            <div className=\"search-books\">\n                <div className=\"search-books-bar\">\n                    <Link to='/'><button className=\"close-search\">Close</button> </Link>\n                    <div className=\"search-books-input-wrapper\">\n                        <input type=\"text\" placeholder=\"Search by title or author\" onChange={(event) => this.searchBooks(event.target.value)} />\n                    </div>\n                </div>\n                <div className=\"search-books-results\">\n                    <ol className=\"books-grid\">\n                        {uncategorizedBookItems}\n                    </ol>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default SearchPage"]},"metadata":{},"sourceType":"module"}