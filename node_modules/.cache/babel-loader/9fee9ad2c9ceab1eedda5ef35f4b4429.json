{"ast":null,"code":"import _toConsumableArray from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ibagci/Documents/React/Projects/ReactND-MyReads/src/SearchPage.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport * as BooksAPI from './BooksAPI';\nimport Book from './Book';\nimport SearchBar from './SearchBar';\nvar currentlyReadingBooks = [];\nvar wantToReadBooks = [];\nvar readBooks = [];\nvar uncategorizedBooks = [];\n\nvar SearchPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchPage, _Component);\n\n  function SearchPage(props) {\n    var _this;\n\n    _classCallCheck(this, SearchPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchPage).call(this, props));\n\n    _this.searchBooks = function (query) {\n      BooksAPI.search(query).then(function (result) {\n        if (typeof result === 'undefined') {\n          _this.setState({\n            filteredBooks: _this.props.categorizedBooks\n          });\n        } else {\n          _this.setState({\n            filteredBooks: result\n          });\n        }\n      });\n    };\n\n    _this.getBooksWithShelves = function () {\n      var categorizedBooks = _this.props.categorizedBooks;\n      var filteredBooks = _this.state.filteredBooks;\n      var books = [];\n      var isAlreadyCategorized = false;\n\n      if (filteredBooks.length > 0) {\n        var currentFilteredBooks = _toConsumableArray(filteredBooks);\n\n        currentFilteredBooks.forEach(function (filteredBook) {\n          isAlreadyCategorized = false;\n          categorizedBooks.forEach(function (book) {\n            if (book.id === filteredBook.id) {\n              isAlreadyCategorized = true;\n              books.push(book);\n              return;\n            }\n          });\n\n          if (!isAlreadyCategorized) {\n            filteredBook.shelf = 'none';\n            books.push(filteredBook);\n          }\n        });\n      }\n\n      return books;\n    };\n\n    _this.state = {\n      filteredBooks: []\n    };\n    return _this;\n  }\n\n  _createClass(SearchPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      currentlyReadingBooks = [];\n      wantToReadBooks = [];\n      readBooks = [];\n      uncategorizedBooks = [];\n      this.getBooksWithShelves().forEach(function (book) {\n        if (book.shelf === 'currentlyReading') {\n          currentlyReadingBooks.push(book);\n        } else if (book.shelf === 'wantToRead') {\n          wantToReadBooks.push(book);\n        } else if (book.shelf === 'read') {\n          readBooks.push(book);\n        } else if (book.shelf === 'none') {\n          uncategorizedBooks.push(book);\n        }\n      });\n      var uncategorizedBookItems = uncategorizedBooks.map(function (book) {\n        return React.createElement(Book, {\n          key: book.id,\n          book: book,\n          onShelfSelectionChanged: _this2.props.onShelfSelectionChanged,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        });\n      });\n      return React.createElement(\"div\", {\n        className: \"search-books\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        searchBooks: this.searchBooks,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"search-books-results\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"ol\", {\n        className: \"books-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, uncategorizedBookItems)));\n    }\n  }]);\n\n  return SearchPage;\n}(Component);\n\nexport default SearchPage;","map":{"version":3,"sources":["/Users/ibagci/Documents/React/Projects/ReactND-MyReads/src/SearchPage.js"],"names":["React","Component","Link","BooksAPI","Book","SearchBar","currentlyReadingBooks","wantToReadBooks","readBooks","uncategorizedBooks","SearchPage","props","searchBooks","query","search","then","result","setState","filteredBooks","categorizedBooks","getBooksWithShelves","state","books","isAlreadyCategorized","length","currentFilteredBooks","forEach","filteredBook","book","id","push","shelf","uncategorizedBookItems","map","onShelfSelectionChanged"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport * as BooksAPI from './BooksAPI'\nimport Book from './Book'\nimport SearchBar from './SearchBar'\n\nlet currentlyReadingBooks = []\nlet wantToReadBooks = []\nlet readBooks = []\nlet uncategorizedBooks = []\n\nclass SearchPage extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            filteredBooks: []\n        }\n    }\n\n\n    searchBooks = (query) => {\n        BooksAPI\n            .search(query)\n            .then((result) => {\n                if (typeof result === 'undefined') {\n                    this.setState({\n                        filteredBooks: this.props.categorizedBooks,\n                    })\n                } else {\n                    this.setState({\n                        filteredBooks: result,\n                    })\n                }\n            })\n    }\n\n    getBooksWithShelves = () => {\n        const { categorizedBooks } = this.props\n        const { filteredBooks } = this.state\n\n        let books = []\n        let isAlreadyCategorized = false\n\n        if (filteredBooks.length > 0) {\n            const currentFilteredBooks = [...filteredBooks]\n\n            currentFilteredBooks.forEach((filteredBook) => {\n                isAlreadyCategorized = false\n                categorizedBooks.forEach(book => {\n                    if (book.id === filteredBook.id) {\n                        isAlreadyCategorized = true\n                        books.push(book)\n                        return\n                    }\n                })\n                if (!isAlreadyCategorized) {\n                    filteredBook.shelf = 'none'\n                    books.push(filteredBook)\n                }\n            })\n        }\n        return books\n    }\n\n    render() {\n        currentlyReadingBooks = []\n        wantToReadBooks = []\n        readBooks = []\n        uncategorizedBooks = []\n\n        this.getBooksWithShelves().forEach(book => {\n            if (book.shelf === 'currentlyReading') { currentlyReadingBooks.push(book) } \n            else if (book.shelf === 'wantToRead') { wantToReadBooks.push(book) } \n            else if (book.shelf === 'read') { readBooks.push(book) } \n            else if (book.shelf === 'none') { uncategorizedBooks.push(book) }\n        })\n\n        let uncategorizedBookItems = uncategorizedBooks.map((book) => {\n            return (\n                <Book\n                    key={book.id}\n                    book={book}\n                    onShelfSelectionChanged={this.props.onShelfSelectionChanged}\n                />\n            )\n        })\n\n        return (\n            <div className=\"search-books\">\n                <SearchBar searchBooks={this.searchBooks}/>\n                <div className=\"search-books-results\">\n                    <ol className=\"books-grid\">\n                        {uncategorizedBookItems}\n                    </ol>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default SearchPage"]},"metadata":{},"sourceType":"module"}